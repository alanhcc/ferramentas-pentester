from cryptography.fernet import Fernet

def gerar_chave():
    chave = Fernet.generate_key()
    with open('chave.key', 'wb') as arquivo_chave:
        arquivo_chave.write(chave)

def carregar_chave():
    with open('chave.key', 'rb') as arquivo_chave:
        chave = arquivo_chave.read()
    return chave


def criptografar_codigo(codigo, chave):
    f = Fernet(chave)
    codigo_criptografado = f.encrypt(codigo.encode())
    return codigo_criptografado

def descriptografar_codigo(codigo_criptografado, chave):
    f = Fernet(chave)
    codigo_descriptografado = f.decrypt(codigo_criptografado).decode()
    return codigo_descriptografado

# Exemplo de uso
gerar_chave()
chave = carregar_chave()
codigo_original = 'print("Olá, mundo!")'

codigo_criptografado = criptografar_codigo(codigo_original, chave)
print('Código criptografado:', codigo_criptografado)

codigo_descriptografado = descriptografar_codigo(codigo_criptografado, chave)
print('Código descriptografado:', codigo_descriptografado)
